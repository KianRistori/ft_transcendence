{% extends 'core/base.html' %}
{% load static %}
{% block content %}
<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
</head>
{% if report_type != "detail" %}
  <div class="container text-center" id="start_game_div" style="display: none;">
{% else %}
  <div class="container text-center" id="start_game_div" style="display: block;">
{% endif %}
  <h1 class="mt-4 mb-5">{{user_data.username}} VS gay</h1>
  
  <form id="form">
    <input type="text" name="message"/>
  </form>

  <div id="messages"></div>
  <div class="alert alert-secondary mb-3" role="alert">
    Player 1 Moves with W and S, Player 2 moves with Up Arrow and Down Arrow. <br>
    When you are ready press the Start Button
  </div>
  <button id="btnStart" type="button" class="btn btn-primary">Start Game</button>
  <canvas id="pongCanvas" width="1200" height="500" class="mx-auto" style="display: none;"></canvas>
  <div id="btnsStatus" class="btn-group mt-3" role="group" style="display: none;">
    <button id="btnStatusPlay" type="button" class="btn btn-outline-secondary"><i class="bi bi-play-fill"></i></button>
    <button id="btnStatusPause" type="button" class="btn btn-outline-secondary"><i class="bi bi-pause-fill"></i></button>
    <button id="btnStatusRewind" type="button" class="btn btn-outline-secondary"><i class="bi bi-rewind-fill"></i></button>
  </div>
</div>

<div class="alert alert-dark" role="alert">
  This is a dark alertâ€”check it out!
</div>

{% if friends %}
<h3>Amici:</h3>
<ul class="list-group">
  {% for friend in friends %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      {% if friend.user1 == user %}
        {{ friend.user2.username }}
        <button onclick="inviteFriend('{{ friend.user2.username }}')" class="btn btn-success">Invita amico</button>
      {% else %}
        {{ friend.user1.username }}
        <button onclick="inviteFriend('{{ friend.user1.username }}')" class="btn btn-success">Invita amico</button>
      {% endif %}
        <!--
        <input type="hidden" name="friend_id" value="{{ friend.user2.id }}">
        <button onclick="inviteFriend('{{friend.user2}}')" class="btn btn-success">invita amico</button>
        -->
    </li>
  {% endfor %}
</ul>
{% else %}
<p>Nessun amico al momento.</p>
{% endif %}

{# Serialize user_data as JSON string using json_script tag #}
{% if user_data %}
    <script>
        const userData = {{ user_data|safe }};
    </script>
{% endif %}

<script src="{% static 'js/app.js' %}"></script>
{% endblock %}